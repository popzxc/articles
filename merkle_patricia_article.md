Как по мне, так самая горячая тема в комментариях про любую статью с обсуждением технических интервью - это "Какого черта я должен помнить наизусть все эти чёртовы алгоритмы и структуры данных?" Основной тезис, как правило, заключается в том, что всё так или иначе используемое уже реализовано по десять раз и с наибольшей долей вероятности заниматься этим рядовому программисту вряд ли придётся. Что ж, в какой-то мере это верно. Но, как оказалось, реализовано не всё, и мне, к сожалению (или к счастью?) реализовывать Структуру Данных всё-таки пришлось. Да не абы какую, а Modified Merkle[ссылка на merkle tree] Patricia[ссылка на PATRICIA] Trie[ссылка на Trie].
В переводе это, наверное, звучит ещё более грозно. Модифицированное Префиксное Дерево Мёркла-Патриции? Модифицированное Префиксное Патриция-дерево Мёркла? Модифицированное патрицифицированное мерклизированное дерево? А впрочем чёрт с ним, давайте к сути.

[КПДВ]

Для начала, давайте разберемся, что это за структура и зачем она вообще нужна. Делать мы будем это по частям.

ЧТО ЭТО?
Дерево - структура данных, представляющая собой связный ациклический граф. Тут всё просто, все с этим знакомы.
Префиксное дерево - корневое дерево, в котором можно хранить пары ключ-значение за счёт того, что узлы делятся на два типа: те, что содержат часть пути (префикс), и конечные узлы, которые содержат хранимое значение. Таким образом получается, что значение присутствует в дереве тогда и только тогда, когда мы, используя ключ, можем пройти от корня дерева весь путь и в конце найти узел со значением.
PATRICIA-дерево - это префиксное дерево, в котором префиксы бинарны - то есть, каждый узел-ключ хранит информацию об одном бите.
Дерево Мёркла - это дерево хешей, построенное над какой-то цепочкой данных, агрегирующее эти самые хеши в один (корневой), хранящий информацию о состоянии всех блоков данных. То есть, корневой хеш - это эдакая "цифровая подпись" состояния цепи блоков. Используется эта штука активно в блокчейне, и подробнее про неё можно почитать тут[ссылка на статью от BF на хабре].

[картинка-демонстрация всех 4 деревьев]

Таким образом можно понять, что Merkle Patricia Trie - это дерево хешей, хранящее пары ключ-значение, при этом ключи представлены в бинарном виде. И оно ещё Modified. Но в чем именно оно modified мы узнаем чуть позже, когда будем обсуждать реализацию. И да, отныне вместо Merkle Patricia Trie я для краткости буду писать MPT.

ЗАЧЕМ ЭТО?
MPT - 